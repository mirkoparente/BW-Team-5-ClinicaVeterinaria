@model BW_Team_5_ClinicaVeterinaria.Models.Prodotti

@{
    ViewBag.Title = "CercaProdotti";
}

            

    <section data-section-id="2" data-share="" data-category="headers" data-component-id="44d0b9e2_02_awz" class="d-flex justify-content-between pb-5" data-path="0">
        <div class="d-flex flex-column w-100 justify-content-center" data-path="0.1">
            <div class="container" data-path="0.1.1">
                <div class="row pt-5" data-path="0.1.1.0">
                    <div class="col-12 col-lg-5 w-100" data-path="0.1.1.0.0">
                        <div class="mb-5" data-path="0.1.1.0.0.0">
                            <h2 class="display-4 fw-bold mb-5" data-config-id="header" data-path="0.1.1.0.0.0.0">Cerca Prodotti</h2>
                            <div class="d-flex">
                                <input type="text" name="Nome" value="" id="prodotto" class="form-control" placeholder="Nome Prodotto" />                            </div>

                            <div class="d-flex flex-wrap mt-3 justify-content-center" data-path="0.1.1.0.0.0.2">
                                <button class="btn btn-primary me-2 mb-2 mb-sm-0" type="button" id="cerca">Cerca</button>
                            </div>

                        </div>
                    </div>
                </div>
            </div>
        </div>
        <img class="d-none d-lg-block start-0 h-100 bottom-0 w-50  img-fluid" style="object-fit: contain; top:-16px;" src="https://www.farmaciafontana.com/wp-content/uploads/2022/11/vet.jpg" alt="" data-config-id="02_image" data-path="0.0">
    </section>


<div id="risultato" class="mt-2 d-flex justify-content-start" style="display:none">
    <div id="ca">
    </div>
</div>
            

@section scripts
    {
    <script type="text/javascript">
        $(document).ready(function () {
            $("#cerca").click(function () {
                var val = $('#prodotto').val()
                console.log(val)
                $("#risultato").slideToggle()
                $("#ca").empty()

                $.ajax({
                    method: "GET",
                    url: "Prodotti/Cerca",
                    data: {Nome:val},
                    success: function (d) {
                        console.log(d)

                        $.each(d, function (i, v) {
                            var c = `<a href="./Prodotti/Details?id=${v.IdProdotti}" ><div class="card" style="width: 18rem;">
             
              <div class="card-body">
                <h5 class="card-title">${v.Nome}</h5>

                <p class="card-text">${v.Descrizione}</p>
                <p class="card-text">${v.NomeArmadietto}</p>
                <p class="card-text">Cassetto: ${v.NomeCassetto}</p>

              </div>
    <div class="d-flex justify-content-center">
    <a href="./Ordini/AggiungiAlCarrello?id=${v.IdProdotti}" class="btn btn-primary my-3">Acquista</a>
    </div>
</div>
    
    </a>`
    
                            $("#ca").append(c)

                        })
                    }


                })
            })

        })





    </script>
}
